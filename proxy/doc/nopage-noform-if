{"id":1016898,"slug":"if","title":"联动","book_id":187346,"book":{"id":187346,"type":"Book","slug":"noform","name":"NoForm","user_id":222786,"description":"NoForm - 让天下没有难做的表单","creator_id":110109,"public":1,"items_count":31,"likes_count":0,"watches_count":1,"content_updated_at":"2018-12-15T02:46:15.948Z","updated_at":"2018-12-15T02:46:15.000Z","created_at":"2018-12-11T00:41:54.000Z","namespace":"nopage/noform","user":{"id":222786,"type":"Group","login":"nopage","name":"NoPage","description":"NoPage - 让天下没有难做的CRUD","avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png","large_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":5,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2018-12-11T00:38:10.000Z","updated_at":"2018-12-11T08:20:27.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":110109,"creator":{"id":110109,"type":"User","login":"guishu","name":"鬼鼠","description":null,"avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png","large_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":3,"public_books_count":1,"followers_count":0,"following_count":0,"created_at":"2018-04-24T06:58:34.000Z","updated_at":"2018-12-14T07:36:21.000Z","_serializer":"v2.user"},"format":"asl","body":"","body_draft":"","body_html":"<h1 id=\"gag2fm\" data-type=\"h\"><a class=\"anchor\" id=\"联动\" href=\"#gag2fm\"></a>联动</h1><div data-type=\"p\"></div><div data-type=\"p\">联动是表单领域不可回避的问题，复杂的联动常常让开发者抓耳挠腮， NoForm通过If组件，提供最基础、使用的联动能力，助力开发者应对联动问题。</div><div data-type=\"p\"></div><h1 id=\"ahqfgn\" data-type=\"h\"><a class=\"anchor\" id=\"demo\" href=\"#ahqfgn\"></a>DEMO</h1><div data-type=\"p\"></div><div data-type=\"p\"></div><div data-type=\"p\"><div id=\"kurmpv\" data-type=\"image\" data-display=\"block\" data-align=\"left\" data-src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544089296969-7f6cd5b2-7897-4358-bb63-ddc23f931a01.gif\" data-width=\"609\"><img src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544089296969-7f6cd5b2-7897-4358-bb63-ddc23f931a01.gif\" width=\"609\"/></div></div><div data-type=\"p\"></div><div data-type=\"p\"></div><h3 id=\"5y42ql\" data-type=\"h\"><a class=\"anchor\" id=\"if-控制显示隐藏\" href=\"#5y42ql\"></a>If 控制显示隐藏</h3><div data-type=\"p\"></div><pre data-syntax=\"\"><code class=\"language-\">    &lt;Form core={this.core} layout={{ label: 8, control: 16 }}&gt;\n        &lt;div className=&quot;example-title&quot;&gt;Condition Examples&lt;/div&gt;\n        &lt;Alert style={{ marginBottom: 12 }} message={&lt;div&gt;\n            &lt;div&gt;1. username = bobby, you get &lt;span&gt;🤖&lt;/span&gt;&lt;/div&gt;\n            &lt;div&gt;2. username = bobby and age = 23, yout get &lt;span&gt;👇🏼&lt;/span&gt;&lt;/div&gt;\n            &lt;div&gt;2. username = bobby and age = 23, password = noform yout get &lt;span&gt;🌈&lt;/span&gt;&lt;/div&gt;\n        &lt;/div&gt;} type=&quot;info&quot; showIcon /&gt;\n\n        &lt;FormItem label=&quot;username&quot; name=&quot;username&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem label=&quot;age&quot; name=&quot;age&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;                                \n\n        &lt;If when={(values, { globalStatus }) =&gt; {\n            return values.username === &#x27;bobby&#x27;;\n        }}&gt;\n            &lt;FormItem label=&quot;&quot; style={{ margin: &#x27;12px 0&#x27; }}&gt;\n                &lt;div&gt;\n                &lt;span&gt;🤖&lt;/span&gt;\n                    &lt;If when={(values, { globalStatus }) =&gt; {\n                        return values.age == 23;\n                    }}&gt;\n                        &lt;div&gt;\n                            &lt;span&gt;👇🏼&lt;/span&gt;\n                            &lt;FormItem label=&quot;password&quot; name=&quot;password&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n                            &lt;If when={(values, { globalStatus }) =&gt; {\n                                return values.password === &#x27;noform&#x27;;\n                            }}&gt;\n                                &lt;span&gt;🌈&lt;/span&gt;\n                            &lt;/If&gt;\n                        &lt;/div&gt;\n                    &lt;/If&gt;\n                &lt;/div&gt;\n            &lt;/FormItem&gt;                  \n        &lt;/If&gt;\n\n        &lt;FormItem label=&quot;trigger&quot;&gt;\n            &lt;div &gt;\n                &lt;Button style={{ marginRight: 12 }} onClick={this.triggerIf}&gt;1st&lt;/Button&gt;\n                &lt;Button style={{ marginRight: 12 }} onClick={this.depIf}&gt;2nd&lt;/Button&gt;\n                &lt;Button style={{ marginRight: 12 }} onClick={this.finalIf}&gt;3rd&lt;/Button&gt;\n                &lt;Button style={{ marginRight: 12 }} onClick={this.clear}&gt;clear&lt;/Button&gt;\n            &lt;/div&gt;\n        &lt;/FormItem&gt;\n    &lt;/Form&gt;\n</code></pre><div data-type=\"p\"></div><div data-type=\"p\">如上所示，If通过when函数来判断是否显示，when的入参为：</div><div data-type=\"p\"></div><ul data-type=\"unordered-list\"><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">values 表单的值集合</div></li><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">core 表单核心</div></li></ul><div data-type=\"p\"></div><div data-type=\"p\">当values改变的时候，when就会去判断是否命中，如果命中就会重新渲染这部分。</div><div data-type=\"p\"></div><blockquote><div data-type=\"p\">If支持嵌套If，如上述代码块所示，并且不限制返回的内容。</div></blockquote><div data-type=\"p\"></div><h3 id=\"0emrpu\" data-type=\"h\"><a class=\"anchor\" id=\"item-逻辑联动\" href=\"#0emrpu\"></a>Item 逻辑联动</h3><div data-type=\"p\"></div><div data-type=\"p\">通过FormItem/Item的render属性，可以自定义控制渲染的内容，如下所示：</div><div data-type=\"p\"></div><h3 id=\"f4srtn\" data-type=\"h\"><a class=\"anchor\" id=\"核心代码\" href=\"#f4srtn\"></a>核心代码</h3><div data-type=\"p\"></div><pre data-syntax=\"\"><code class=\"language-\">&lt;FormItem label=&quot;Price&quot; name=&quot;price&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n&lt;FormItem label=&quot;Quantitty&quot; name=&quot;quantity&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n&lt;FormItem label=&quot;Unit&quot; name=&quot;unit&quot;&gt;&lt;Select options={dataSource}/&gt;&lt;/FormItem&gt;\n\n&lt;FormItem render={(values, { globalStatus }) =&gt; { /** Each field&#x27;s change will trigger render **/\n    const { price, quantity } = values;\n    const amount = parseInt(price ||  0) * parseInt(quantity ||  0);\n    return &lt;div style={{ lineHeight: &#x27;28px&#x27; }}&gt;Sum: {amount}&lt;/div&gt;\n}} props={(props, formCore) =&gt; {\n    const unit = formCore.getValue(&#x27;unit&#x27;);\n    return {\n        suffix: unit || &#x27;&#x27;\n    };\n}} label=&quot;Combo&quot; /&gt;\n</code></pre><div data-type=\"p\"></div>","public":1,"status":null,"likes_count":0,"comments_count":0,"content_updated_at":"2018-12-06T09:42:05.000Z","deleted_at":null,"created_at":"2018-11-30T16:59:22.000Z","updated_at":"2018-12-11T00:42:43.000Z","published_at":"2018-12-06T09:42:05.000Z","word_count":640,"_serializer":"v2.doc_detail"}