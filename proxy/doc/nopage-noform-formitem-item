{"id":1033989,"slug":"formitem-item","title":"FormItem与Item","book_id":187346,"book":{"id":187346,"type":"Book","slug":"noform","name":"NoForm","user_id":222786,"description":"NoForm - 让天下没有难做的表单","creator_id":110109,"public":1,"items_count":33,"likes_count":0,"watches_count":4,"content_updated_at":"2019-01-07T03:29:29.431Z","updated_at":"2019-01-07T03:29:29.000Z","created_at":"2018-12-11T00:41:54.000Z","namespace":"nopage/noform","user":{"id":222786,"type":"Group","login":"nopage","name":"NoPage","description":"NoPage - 让天下没有难做的CRUD","avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png","large_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":5,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2018-12-11T00:38:10.000Z","updated_at":"2018-12-11T08:20:27.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":110109,"creator":{"id":110109,"type":"User","login":"guishu","name":"鬼鼠","description":null,"avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png","large_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":4,"public_books_count":2,"followers_count":0,"following_count":0,"created_at":"2018-04-24T06:58:34.000Z","updated_at":"2019-01-02T09:12:32.000Z","_serializer":"v2.user"},"format":"asl","body":"","body_draft":"","body_html":"<h1 id=\"ttbahh\" data-type=\"h\"><a class=\"anchor\" id=\"定义\" href=\"#ttbahh\"></a>定义</h1><div data-type=\"p\"></div><div data-type=\"p\"><span data-type=\"color\" style=\"color:rgb(88, 88, 88)\"><span data-type=\"background\" style=\"background-color:rgb(255, 255, 255)\">NoForm认为一个完整的表单元素是FormItem而不是Input, Select这些实际的组件。</span></span></div><div data-type=\"p\"></div><h1 id=\"n3lfrp\" data-type=\"h\"><a class=\"anchor\" id=\"属性\" href=\"#n3lfrp\"></a>属性</h1><div class=\"bi-table\"><table><colgroup><col width=\"180px\"/><col width=\"155px\"/><col width=\"206px\"/><col width=\"207px\"/></colgroup><tbody><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"><strong>属性名</strong></div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"><strong>类型</strong></div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"><strong>说明</strong></div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"><strong>默认值</strong></div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">name</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">表单项关联的关键字</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">undefined</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">label</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">jsx/string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">空字符串时有label宽度</div><div data-type=\"p\">返回null时无label宽度</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">undefined</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">required</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">boolean</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">是否显示必填的红色的 <span data-type=\"color\" style=\"color:#F5222D\">*</span></div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">false</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">prefix</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">jsx/string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">前缀</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">suffix</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">jsx/string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">后缀</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">top</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">jsx/string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">顶部内容</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">help</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">jsx/string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">底部说明内容</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">error</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">string/object</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">错误信息显示</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">render</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">返回JSX，通常用于combo或者返回动态元素</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">undefined</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">listenKeys</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">array</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">有name情况下，只监听自身的改变</div><div data-type=\"p\">有render情况下，监听listenKeys相应的字段</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">undefined</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">layout</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">object</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">需要配置label和control</div><div data-type=\"p\">{ label: 24-number, control: 24-number }</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr></tbody></table></div><div data-type=\"p\"></div><h1 id=\"r96qim\" data-type=\"h\"><a class=\"anchor\" id=\"demo\" href=\"#r96qim\"></a>DEMO</h1><div data-type=\"p\"><div id=\"2z1you\" data-type=\"image\" data-display=\"block\" data-align=\"left\" data-src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544098652446-262d175d-5661-4d41-b038-402e682991ce.gif\" data-width=\"379\"><img src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544098652446-262d175d-5661-4d41-b038-402e682991ce.gif\" width=\"379\"/></div></div><h1 id=\"dr1ozo\" data-type=\"h\"><a class=\"anchor\" id=\"代码\" href=\"#dr1ozo\"></a>代码</h1><pre data-syntax=\"jsx\"><code class=\"language-jsx\">import Form, { FormItem, Item } from &#x27;noform&#x27;;\n\nconst App = () =&gt; {\n    return &lt;Form&gt;\n        &lt;FormItem label=&quot;姓名&quot; name=&quot;username&quot;&gt;&lt;Input /&gt;&lt;FormItem&gt;\n        &lt;Item name=&quot;age&quot;&gt;&lt;Input /&gt;&lt;Item&gt;&lt;!-- 没有layout，其余和FormItem完全一致--&gt;\n        &lt;Item render={(values, context) =&gt; {\n            // 动态渲染\n            const { username, age } = values;\n            return &lt;div&gt;{username} + {age}&lt;/div&gt;\n        } /&gt;\n    &lt;/Form&gt;\n};\n</code></pre><div data-type=\"p\"></div><h1 id=\"7mm4ds\" data-type=\"h\"><a class=\"anchor\" id=\"formitem长什么样\" href=\"#7mm4ds\"></a>FormItem长什么样</h1><div data-type=\"p\"></div><div data-type=\"p\"><div data-type=\"image\" data-display=\"block\" data-align=\"left\" data-src=\"https://img.alicdn.com/tfs/TB1a1PWs_tYBeNjy1XdXXXXyVXa-567-158.png\" data-width=\"\"><img src=\"https://img.alicdn.com/tfs/TB1a1PWs_tYBeNjy1XdXXXXyVXa-567-158.png\" width=\"\"/></div></div><div data-type=\"p\">完整的FormItem包含prefix, suffix, top, help, error等表单元素的额外属性。 其中content则为真实的表单组件，如Input，Select之类的。</div><div data-type=\"p\"></div><h1 id=\"05dxzq\" data-type=\"h\"><a class=\"anchor\" id=\"item长什么样\" href=\"#05dxzq\"></a>Item长什么样</h1><div data-type=\"p\"><div id=\"wckfgn\" data-type=\"image\" data-display=\"block\" data-align=\"left\" data-src=\"https://cdn.nlark.com/yuque/0/2018/png/110109/1544098785980-e91b811d-34c8-47ad-9805-6c73a6a7e50a.png\" data-width=\"160\"><img src=\"https://cdn.nlark.com/yuque/0/2018/png/110109/1544098785980-e91b811d-34c8-47ad-9805-6c73a6a7e50a.png\" width=\"160\"/></div></div><div data-type=\"p\"></div><div data-type=\"p\">Item常用于不需要布局的地方，如行内，或者多表单值组合的场景，另外Item的 <code>render</code>非常强大，能够动态拼装任意表单值。</div><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">&lt;Item listenKeys={[&#x27;age&#x27;, &#x27;username&#x27;]} render={(values, context) =&gt; {\n    const { username, age } = values;\n    return &lt;div&gt;{username} + {age}&lt;/div&gt;\n} /&gt;\n</code></pre><div data-type=\"p\"></div><div data-type=\"p\">不过由于任意表单值的变化都会引起Item Render 的渲染，所以为了性能考虑，我们可以用 <code>listenKeys</code> 减少渲染次数。</div><div data-type=\"p\"></div><h1 id=\"4wuoph\" data-type=\"h\"><a class=\"anchor\" id=\"动态渲染\" href=\"#4wuoph\"></a>动态渲染</h1><div data-type=\"p\"></div><ol start=\"1\" data-type=\"unordered-list\"><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">通过render实现动态suffix 元素传入</div></li></ol><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">// dynamic render\nconst dynamicSuiffx = &lt;Item render={(values) =&gt; &lt;div&gt;{values.name}&lt;/div&gt;} /&gt;\n\n&lt;FormItem label=&quot;dynamic&quot; name=&quot;dynamic&quot; suffix={dynamicSuiffx}&gt;\n    &lt;Input /&gt;\n&lt;/FormItem&gt;\n</code></pre><div data-type=\"p\"></div><ol start=\"2\" data-type=\"unordered-list\"><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">通过render实现动态suffix 配置</div></li></ol><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">&lt;Item render={(values) =&gt; {\n    return &lt;FormItem label=&quot;dynamic&quot; name=&quot;dynamic&quot; suffix={values.name}&gt;\n        &lt;Input /&gt;\n    &lt;/FormItem&gt;\n} /&gt;\n</code></pre><div data-type=\"p\"></div>","public":1,"status":null,"likes_count":0,"comments_count":0,"content_updated_at":"2018-12-08T09:12:29.000Z","deleted_at":null,"created_at":"2018-12-06T10:12:20.000Z","updated_at":"2018-12-11T00:42:43.000Z","published_at":"2018-12-08T09:12:29.000Z","first_published_at":null,"word_count":543,"cover":null,"description":"定义NoForm认为一个完整的表单元素是FormItem而不是Input, Select这些实际的组件。属性属性名类型说明默认值namestring表单项关联的关键字undefinedlabeljsx/string空字符串时有label宽度返回null时无label宽度undefinedreq...","custom_description":null,"_serializer":"v2.doc_detail"}