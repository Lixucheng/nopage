{"id":1047228,"slug":"scene-list-form","title":"NoList + NoForm","book_id":187343,"book":{"id":187343,"type":"Book","slug":"nolist","name":"NoList","user_id":222786,"description":"NoList - 让天下没有难做的列表","creator_id":110109,"public":1,"items_count":9,"likes_count":0,"watches_count":1,"content_updated_at":"2018-12-15T02:40:29.594Z","updated_at":"2018-12-15T02:40:29.000Z","created_at":"2018-12-11T00:38:37.000Z","namespace":"nopage/nolist","user":{"id":222786,"type":"Group","login":"nopage","name":"NoPage","description":"NoPage - 让天下没有难做的CRUD","avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png","large_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":5,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2018-12-11T00:38:10.000Z","updated_at":"2018-12-11T08:20:27.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":110109,"creator":{"id":110109,"type":"User","login":"guishu","name":"鬼鼠","description":null,"avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png","large_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":3,"public_books_count":1,"followers_count":0,"following_count":0,"created_at":"2018-04-24T06:58:34.000Z","updated_at":"2018-12-14T07:36:21.000Z","_serializer":"v2.user"},"format":"asl","body":"","body_draft":"","body_html":"<h1 id=\"a667vt\" data-type=\"h\"><a class=\"anchor\" id=\"实现效果\" href=\"#a667vt\"></a>实现效果</h1><div data-type=\"p\"></div><div data-type=\"p\"><div id=\"lamzil\" data-type=\"image\" data-display=\"block\" data-align=\"left\" data-src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544585246819-b00a38fd-e0c7-422a-998f-09952142c81b.gif\" data-width=\"747\"><img src=\"https://cdn.nlark.com/yuque/0/2018/gif/110109/1544585246819-b00a38fd-e0c7-422a-998f-09952142c81b.gif\" width=\"747\"/></div></div><div data-type=\"p\"></div><h1 id=\"hxfifp\" data-type=\"h\"><a class=\"anchor\" id=\"代码\" href=\"#hxfifp\"></a>代码</h1><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">import &#x27;./antd.scss&#x27;;\nimport List, { Any, Filter, Table, Pagination } from &#x27;nolist/lib/wrapper/antd&#x27;;\nimport Form, { FormItem, FormCore } from &#x27;noform&#x27;;\nimport { message } from &#x27;antd&#x27;;\nimport { Input, Select, DatePicker, Dialog } from &#x27;nowrapper/lib/antd&#x27;;\n\nconst handleError = (e) =&gt; {\n  console.log(&#x27;e&#x27;, e);\n};\n\nconst sleep = (ms) =&gt; new Promise(resolve =&gt; setTimeout(resolve, ms));\n\n\nlet globalList;\nconst onMount = (list) =&gt; {\n  window.list = globalList = list;\n}\n\nconst editForm = (val, index, record) =&gt; {\n  const core = new FormCore({\n    values: record\n  });\n\n  Dialog.show({\n    title: &#x27;编辑&#x27;,\n    footerAlign: &#x27;label&#x27;,\n    locale: &#x27;zh&#x27;,\n    style: { width: &#x27;480px&#x27; },\n    enableValidate: true,\n    onOk: async (values, hide) =&gt; {\n        await sleep(1000);\n        message.success(&#x27;编辑成功&#x27;);\n        globalList.refresh(); //  重新刷新列表\n        hide();\n    },\n    content: &lt;Form handleError={handleError} layout={{ label: 8, control: 16 }} core={core} &gt;\n        &lt;FormItem name=&quot;id&quot; label=&quot;id&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem name=&quot;username&quot; label=&quot;username&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem name=&quot;age&quot; label=&quot;age&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem name=&quot;gender&quot; label=&quot;gender&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem name=&quot;country&quot; label=&quot;country&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n        &lt;FormItem name=&quot;registeredDate&quot; label=&quot;registeredDate&quot;&gt;&lt;Input /&gt;&lt;/FormItem&gt;\n    &lt;/Form&gt;\n  });\n};\n\nconst renderOperation = (text, record, idx) =&gt; {\n  return &lt;a href=&quot;javascript:void(0)&quot; onClick={editForm}&gt;编辑&lt;/a&gt;\n};\n\nclass App extends React.Component {\n  render() {\n    return (\n      &lt;div style={{ margin: &#x27;24px&#x27; }}&gt;\n        &lt;List  url=&quot;/docs/mock.json&quot; onError={handleError} onMount={onMount}&gt;\n            &lt;Filter cols={3}&gt;\n              &lt;Filter.Item label=&quot;username&quot; name=&quot;username&quot;&gt;&lt;Input /&gt;&lt;/Filter.Item&gt;\n              &lt;Filter.Item label=&quot;age&quot; name=&quot;age&quot;&gt;&lt;Input /&gt;&lt;/Filter.Item&gt;\n              &lt;Filter.Item label=&quot;country&quot; name=&quot;country&quot;&gt;&lt;Select dataSource={[]} /&gt;&lt;/Filter.Item&gt;\n              &lt;Filter.Item label=&quot;date&quot; name=&quot;date&quot;&gt;&lt;DatePicker /&gt;&lt;/Filter.Item&gt;\n              &lt;Filter.Item label=&quot;创建时间&quot; colSpan=&quot;2&quot;&gt;\n                  &lt;React.Fragment&gt;\n                      &lt;Filter.Item noLayout name=&quot;createStartTime&quot;&gt;&lt;DatePicker /&gt;&lt;/Filter.Item&gt;\n                      &lt;Filter.Item noLayout name=&quot;createEndTime&quot;&gt;&lt;DatePicker /&gt;&lt;/Filter.Item&gt;\n                  &lt;/React.Fragment&gt;\n              &lt;/Filter.Item&gt;\n            &lt;/Filter&gt;\n            &lt;Table&gt;\n              &lt;Table.Column title=&quot;id&quot; dataIndex=&quot;id&quot; /&gt;\n              &lt;Table.Column title=&quot;username&quot; dataIndex=&quot;username&quot; /&gt;\n              &lt;Table.Column title=&quot;age&quot; dataIndex=&quot;age&quot; /&gt;\n              &lt;Table.Column title=&quot;gender&quot; dataIndex=&quot;gender&quot; /&gt;\n              &lt;Table.Column title=&quot;country&quot; dataIndex=&quot;country&quot; /&gt;\n              &lt;Table.Column title=&quot;registeredDate&quot; dataIndex=&quot;registeredDate&quot; /&gt;\n              &lt;Table.Column title=&quot;operation&quot; render={renderOperation} /&gt;\n            &lt;/Table&gt;\n            &lt;Pagination /&gt;\n        &lt;/List&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n</code></pre><div data-type=\"p\"></div>","public":1,"status":null,"likes_count":0,"comments_count":0,"content_updated_at":"2018-12-13T05:39:11.000Z","deleted_at":null,"created_at":"2018-12-12T02:22:22.000Z","updated_at":"2018-12-13T05:39:11.000Z","published_at":"2018-12-13T05:39:11.000Z","word_count":564,"_serializer":"v2.doc_detail"}