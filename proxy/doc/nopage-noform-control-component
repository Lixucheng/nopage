{"id":1038911,"slug":"control-component","title":"自定义组件","book_id":187346,"book":{"id":187346,"type":"Book","slug":"noform","name":"NoForm","user_id":222786,"description":"NoForm - 让天下没有难做的表单","creator_id":110109,"public":1,"items_count":31,"likes_count":0,"watches_count":1,"content_updated_at":"2018-12-15T02:46:15.948Z","updated_at":"2018-12-15T02:46:15.000Z","created_at":"2018-12-11T00:41:54.000Z","namespace":"nopage/noform","user":{"id":222786,"type":"Group","login":"nopage","name":"NoPage","description":"NoPage - 让天下没有难做的CRUD","avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png","large_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":5,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2018-12-11T00:38:10.000Z","updated_at":"2018-12-11T08:20:27.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":110109,"creator":{"id":110109,"type":"User","login":"guishu","name":"鬼鼠","description":null,"avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png","large_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":3,"public_books_count":1,"followers_count":0,"following_count":0,"created_at":"2018-04-24T06:58:34.000Z","updated_at":"2018-12-14T07:36:21.000Z","_serializer":"v2.user"},"format":"asl","body":"","body_draft":"","body_html":"<h1 id=\"5hedkl\" data-type=\"h\"><a class=\"anchor\" id=\"接入标准\" href=\"#5hedkl\"></a>接入标准</h1><div data-type=\"p\"></div><div data-type=\"p\">NoForm接入的组件标准为<code>受控组件</code>，简单来说就是实现了 <code>value</code> 和 <code>onChange</code> 的组件。例子如下 :</div><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">class Input extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: &#x27;&#x27;\n        };\n    }\n\n    componentWillReceiveProps = (nextProps) =&gt; {\n        if (nextProps.value !== this.state.value) {\n            this.setState({\n                value: nextProps.value\n            });\n        }\n    }\n\n    onChange = (e) =&gt; {        \n        const formatValue = `format: ${e.target.value}`; // 在这里可以做一些value的调整\n        this.props.onChange &amp;&amp; this.props.onChange(formatValue);\n    }\n\n    render() {\n        return &lt;input value={this.state.value} onChange={this.onChange} /&gt;\n    }\n}\n</code></pre><div data-type=\"p\"></div><h1 id=\"w4gbhd\" data-type=\"h\"><a class=\"anchor\" id=\"状态标准\" href=\"#w4gbhd\"></a>状态标准</h1><div data-type=\"p\"></div><div data-type=\"p\">NoForm还有个很重要的点是状态控制，<code>FormItem</code>或者<code>Item</code> 会将当前状态作为 <code>status</code> 传入，如下所示：</div><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">const CustomElement = (props) =&gt; {\n    const returnEle = &#x27;&#x27;;\n    const { status } = props;\n    switch (status) {\n        case &#x27;edit&#x27;: returnEle = &#x27;Edit&#x27;; break;\n        case &#x27;preview&#x27;: returnEle = &#x27;Preview&#x27;; break;\n        case &#x27;disabled&#x27;: returnEle = &#x27;Disabled&#x27;; break;\n    }\n\n    return &lt;div&gt;{returnEle}&lt;/div&gt;\n}\n</code></pre><div data-type=\"p\"></div>","public":1,"status":null,"likes_count":0,"comments_count":0,"content_updated_at":"2018-12-08T09:19:33.000Z","deleted_at":null,"created_at":"2018-12-08T09:12:46.000Z","updated_at":"2018-12-11T00:42:43.000Z","published_at":"2018-12-08T09:19:33.000Z","word_count":207,"_serializer":"v2.doc_detail"}