{"id":1046856,"slug":"filter-config","title":"基础配置","book_id":187343,"book":{"id":187343,"type":"Book","slug":"nolist","name":"NoList","user_id":222786,"description":"NoList - 让天下没有难做的列表","creator_id":110109,"public":1,"items_count":10,"likes_count":0,"watches_count":3,"content_updated_at":"2018-12-28T02:55:09.949Z","updated_at":"2018-12-30T06:58:58.000Z","created_at":"2018-12-11T00:38:37.000Z","namespace":"nopage/nolist","user":{"id":222786,"type":"Group","login":"nopage","name":"NoPage","description":"NoPage - 让天下没有难做的CRUD","avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png","large_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":5,"public_books_count":4,"followers_count":0,"following_count":0,"created_at":"2018-12-11T00:38:10.000Z","updated_at":"2018-12-11T08:20:27.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":110109,"creator":{"id":110109,"type":"User","login":"guishu","name":"鬼鼠","description":null,"avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png","large_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.yuque.com/yuque/0/2018/png/110109/1527234002873-avatar/2ccdab19-b7e2-42d6-b097-f42de766f94c.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":4,"public_books_count":2,"followers_count":0,"following_count":0,"created_at":"2018-04-24T06:58:34.000Z","updated_at":"2019-01-02T09:12:32.000Z","_serializer":"v2.user"},"format":"asl","body":"","body_draft":"","body_html":"<h1 id=\"a68cga\" data-type=\"h\"><a class=\"anchor\" id=\"引入\" href=\"#a68cga\"></a>引入</h1><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">import List, { Any, Filter, Table, Pagination } from &#x27;nolist/lib/wrapper/antd&#x27;;\n</code></pre><div data-type=\"p\"></div><h1 id=\"k6cnre\" data-type=\"h\"><a class=\"anchor\" id=\"开始\" href=\"#k6cnre\"></a>开始</h1><div data-type=\"p\"></div><pre data-syntax=\"jsx\"><code class=\"language-jsx\">&lt;List  url=&quot;/docs/mock.json&quot; onMount={onMount}&gt;\n    &lt;Filter &gt;\n      &lt;Filter.Item label=&quot;username&quot; name=&quot;username&quot;&gt;&lt;Input /&gt;&lt;/Filter.Item&gt;\n      &lt;Filter.Item label=&quot;age&quot; name=&quot;age&quot;&gt;&lt;Input /&gt;&lt;/Filter.Item&gt;\n    &lt;/Filter&gt;\n    &lt;Table&gt;\n      &lt;Table.Column title=&quot;id&quot; dataIndex=&quot;id&quot; /&gt;\n      &lt;Table.Column title=&quot;username&quot; dataIndex=&quot;username&quot; /&gt;\n      &lt;Table.Column title=&quot;age&quot; dataIndex=&quot;age&quot; /&gt;\n    &lt;/Table&gt;\n    &lt;Pagination /&gt;\n&lt;/List&gt;\n</code></pre><div data-type=\"p\"></div><div data-type=\"p\">从以上代码开始讲述配置, NoList  包含以下几块核心： <code>List</code>, <code>Filter</code>, <code>Table</code>, <code>Pagination</code></div><div data-type=\"p\">其中，Filter实际上即是基于NoForm简单封装的一层。 而 Table 和 Pagination则是基于社区组件库适配而来的，除了NoList内部是用的关键字外，其他属性都是透传。</div><div data-type=\"p\"></div><h3 id=\"oty9ay\" data-type=\"h\"><a class=\"anchor\" id=\"onmount\" href=\"#oty9ay\"></a>onMount</h3><pre data-syntax=\"jsx\"><code class=\"language-jsx\">onMount = (list) =&gt; {\n    this.list = list; // 通常会将list核心挂载在当前页面的this上， 然后可以随时随地操作列表\n}\n\notherAction = async () =&gt; {\n    await modifySomething();\n    this.list.refresh(); // 重新发起请求，异步刷新列表\n}\n</code></pre><div data-type=\"p\"></div><div data-type=\"p\">更多操作列表核心的API可以查看 <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://www.yuque.com/nopage/nolist/api\" class=\"bi-link\">API</a> 小节。</div><div data-type=\"p\"></div><h1 id=\"6w1qgt\" data-type=\"h\"><a class=\"anchor\" id=\"-list\" href=\"#6w1qgt\"></a> List</h1><div class=\"bi-table\"><table><colgroup><col width=\"auto\"/><col width=\"139px\"/><col width=\"auto\"/><col width=\"168px\"/></colgroup><tbody><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">属性名</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">类型</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">说明</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认值</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">url</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">请求数据的url</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">&#x27;&#x27;</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">params</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">object</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">请求数据的GET参数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">{}</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">defaultPage</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">number</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认在当前多少页</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">0</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">pageSize</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">number</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">分页大小</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">10</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">defaultFilterValues</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">object</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认搜索框值</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">{}</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">query</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">() =&gt; Promise</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">自定义请求函数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">defaultQuery</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">autoLoad</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">boolean</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">初始化时是否自动发起请求</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">true</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">formatBefore</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">格式化请求前的参数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"></div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">formatAfter</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">格式化请求后的参数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"></div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">formatFilter</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">格式化搜索区域的值</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"></div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">onError</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">请求失败或异常时调用</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\"></div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">method</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">string</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">请求类型</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">&#x27;GET&#x27;</div></td></tr></tbody></table></div><h3 id=\"v5f4nz\" data-type=\"h\"><a class=\"anchor\" id=\"defaultquery\" href=\"#v5f4nz\"></a>defaultQuery</h3><pre data-syntax=\"jsx\"><code class=\"language-jsx\">import { get, post } from &#x27;../../fetch&#x27;;\n\nexport default function (data, url, method = &#x27;get&#x27;) {\n  let fetch = (method === &#x27;post&#x27;) ? post : get;\n  return fetch(url, data, &#x27;json&#x27;).then((resp) =&gt; {\n    const { code, data } = resp;\n    return data;\n  });\n}\n</code></pre><div data-type=\"p\"></div><h1 id=\"tzv6qh\" data-type=\"h\"><a class=\"anchor\" id=\"filter\" href=\"#tzv6qh\"></a>Filter</h1><div class=\"bi-table\"><table><colgroup><col width=\"auto\"/><col width=\"auto\"/><col width=\"auto\"/><col width=\"auto\"/></colgroup><tbody><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">属性名</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">类型</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">说明</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认值</div></td></tr><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">cols</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">number</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认布局列数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">3</div></td></tr><tr height=\"34px\"><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">render</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function =&gt; jsx</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">自定义视图</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">noop</div></td></tr></tbody></table></div><h1 id=\"yzxvak\" data-type=\"h\"><a class=\"anchor\" id=\"filter.item\" href=\"#yzxvak\"></a>Filter.Item</h1><div class=\"bi-table\"><table><colgroup><col width=\"auto\"/><col width=\"auto\"/><col width=\"auto\"/><col width=\"auto\"/></colgroup><tbody><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">属性名</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">类型</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">说明</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认值</div></td></tr><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">colSpan</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">number</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认占列数</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">1</div></td></tr></tbody></table></div><h1 id=\"bcf7xw\" data-type=\"h\"><a class=\"anchor\" id=\"any\" href=\"#bcf7xw\"></a>Any</h1><div class=\"bi-table\"><table><colgroup><col width=\"auto\"/><col width=\"141px\"/><col width=\"239px\"/><col width=\"229px\"/></colgroup><tbody><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">属性名</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">类型</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">说明</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">默认值</div></td></tr><tr><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">render</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">function =&gt; jsx</div></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">自定义渲染元素</div><div data-type=\"p\">入参为列表核心，可以根据列表内容动态渲染，如：</div><ul data-type=\"unordered-list\"><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">统计数据总数</div></li><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">动态获取搜索框数据</div></li><li data-type=\"list-item\" data-list-type=\"unordered-list\"><div data-type=\"p\">动态根据列表数据渲染</div></li></ul></td><td rowspan=\"1\" colSpan=\"1\"><div data-type=\"p\">null</div></td></tr></tbody></table></div><div data-type=\"p\"></div>","public":1,"status":null,"likes_count":0,"comments_count":0,"content_updated_at":"2018-12-13T05:42:57.000Z","deleted_at":null,"created_at":"2018-12-11T17:08:27.000Z","updated_at":"2018-12-13T05:42:57.000Z","published_at":"2018-12-13T05:42:57.000Z","first_published_at":null,"word_count":582,"cover":null,"description":"引入import List, { Any, Filter, Table, Pagination } from &#x27;nolist/lib/wrapper/antd&#x27;; 开始&lt;List  url=&quot;/docs/mock.json&quot; onMount={on...","custom_description":null,"_serializer":"v2.doc_detail"}